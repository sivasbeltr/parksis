<!-- Görev Durum Güncelleme Formu -->
<div class="bg-white rounded-lg border border-gray-200 p-4">
    <div class="flex items-center gap-3 mb-4">
        <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
            <i class="fas fa-edit text-blue-600 text-sm"></i>
        </div>
        <div>
            <h3 class="text-lg font-medium text-gray-900">Görev Durumu Güncelle</h3>
            <p class="text-sm text-gray-600">Mevcut durum: 
                <span class="font-medium">{{ gorev.get_durum_display }}</span>
            </p>
        </div>
    </div>

    <form hx-post="{% url 'istakip:gorev_durum_guncelle_htmx' gorev.uuid %}"
          hx-target="#gorev-durum-container"
          hx-swap="outerHTML"
          class="space-y-4">
        {% csrf_token %}
        
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Yeni Durum</label>
            <select name="durum" required
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <option value="">Durum seçiniz</option>
                <option value="planlanmis" {% if gorev.durum == 'planlanmis' %}selected{% endif %}>
                    📋 Planlanmış
                </option>
                <option value="devam_ediyor" {% if gorev.durum == 'devam_ediyor' %}selected{% endif %}>
                    🔄 Devam Ediyor
                </option>
                <option value="tamamlandi" {% if gorev.durum == 'tamamlandi' %}selected{% endif %}>
                    ✅ Tamamlandı
                </option>
                <option value="iptal" {% if gorev.durum == 'iptal' %}selected{% endif %}>
                    ❌ İptal
                </option>
            </select>
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Not (Opsiyonel)</label>
            <textarea name="not" rows="3" 
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      placeholder="Durum değişikliği ile ilgili notlarınızı yazabilirsiniz..."></textarea>
        </div>        <div class="flex justify-end gap-3 pt-3 border-t border-gray-200">
            <button type="button"
                    hx-get="{% url 'istakip:gorev_durum_guncelle_htmx' gorev.uuid %}"
                    hx-target="#gorev-durum-container"
                    hx-swap="outerHTML"
                    class="px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors">
                İptal
            </button>
            <button type="submit"
                    class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                <i class="fas fa-save mr-2"></i>
                Durumu Güncelle
            </button>
        </div>
    </form>
</div>